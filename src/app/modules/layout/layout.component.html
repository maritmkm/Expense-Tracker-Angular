<div class="layout-container">
    <!-- Top Navbar -->
    <mat-toolbar class="top-navbar mat-elevation-z2">
        <!-- Menu toggle for mobile -->
        <div>
            <button mat-icon-button class="menu-toggle" (click)="toggleSidenav()" *ngIf="!isLargeScreen">
                <mat-icon>menu</mat-icon>
            </button>

            <!-- Page Title -->
            <div class="navbar-title">
                <h2 class="title">{{ pageTitle }}</h2>
                <p class="subtitle">{{ pageSubtitle }}</p>
            </div>

        </div>
        <!-- Spacer -->
        <!-- <span class="navbar-spacer"></span> -->

        <!-- User Actions -->
        <div class="navbar-actions">
            <button mat-icon-button [matMenuTriggerFor]="userMenu" class="user-avatar">
                <mat-icon class="avatar-icon">account_circle</mat-icon>
            </button>

            <mat-menu #userMenu="matMenu">
                <button mat-menu-item>
                    <mat-icon>person</mat-icon>
                    <span>Profile</span>
                </button>
                <button mat-menu-item>
                    <mat-icon>settings</mat-icon>
                    <span>Settings</span>
                </button>
                <mat-divider></mat-divider>
                <button mat-menu-item (click)="logout()">
                    <mat-icon>logout</mat-icon>
                    <span>Logout</span>
                </button>
            </mat-menu>
        </div>
    </mat-toolbar>

    <!-- Sidenav Container -->
    <mat-sidenav-container class="sidenav-container">
        <!-- Sidebar -->
        <mat-sidenav #sidenav [mode]="isLargeScreen ? 'side' : 'over'" [opened]="isSidenavOpened"
            class="app-sidenav mat-elevation-z4">

            <!-- Sidebar Header -->
            <div class="sidenav-header">
                <div class="logo-container">
                    <div class="logo-icon">
                        <mat-icon>account_balance_wallet</mat-icon>
                    </div>
                    <div class="logo-text">
                        <h3 class="app-name">ExpenseTrack</h3>
                        <p class="app-subtitle">Manage your finances</p>
                    </div>
                </div>
            </div>

            <!-- Stats Cards -->
            <div class="stats-cards">
                <mat-card class="stat-card month-card">
                    <mat-card-content>
                        <div class="stat-icon">
                            <mat-icon>calendar_today</mat-icon>
                        </div>
                        <div class="stat-info">
                            <p class="stat-label">This Month</p>
                            <h4 class="stat-value">{{ (thisMonthSpent$ | async) | currency }}</h4>
                        </div>
                    </mat-card-content>
                </mat-card>

                <mat-card class="stat-card total-card">
                    <mat-card-content>
                        <div class="stat-icon">
                            <mat-icon>account_balance_wallet</mat-icon>
                        </div>
                        <div class="stat-info">
                            <p class="stat-label">Total Spent</p>
                            <h4 class="stat-value">{{ (totalSpent$ | async) | currency }}</h4>
                        </div>
                    </mat-card-content>
                </mat-card>
            </div>

            <!-- Navigation Menu -->
            <mat-nav-list class="nav-menu">
                <a mat-list-item routerLink="/dashboard" routerLinkActive="active-link"
                    (click)="!isLargeScreen && toggleSidenav()">
                    <mat-icon matListItemIcon>dashboard</mat-icon>
                    <span matListItemTitle>Dashboard</span>
                </a>
                <a mat-list-item routerLink="/expenses" routerLinkActive="active-link"
                    (click)="!isLargeScreen && toggleSidenav()">
                    <mat-icon matListItemIcon>receipt_long</mat-icon>
                    <span matListItemTitle>Expenses</span>
                </a>
                <a mat-list-item routerLink="/categories" routerLinkActive="active-link"
                    (click)="!isLargeScreen && toggleSidenav()">
                    <mat-icon matListItemIcon>category</mat-icon>
                    <span matListItemTitle>Categories</span>
                </a>
            </mat-nav-list>
        </mat-sidenav>

        <!-- Main Content -->
        <mat-sidenav-content class="main-content">
            <div class="content-wrapper">
                <router-outlet></router-outlet>
            </div>
        </mat-sidenav-content>
    </mat-sidenav-container>
</div>